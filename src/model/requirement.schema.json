{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RequirementAtom",
  "description": "Canonical definition of an atomic requirement (AFO) in the Audit-by-Design DSL.",
  "type": "object",
  "properties": {
    "actor": {
      "type": "string",
      "minLength": 2,
      "maxLength": 50,
      "pattern": "^[A-Za-z0-9 _-]+$"
    },
    "modality": {
      "type": "string",
      "enum": ["must", "must not"]
    },
    "action": {
      "type": "string",
      "minLength": 3,
      "maxLength": 200,
      "pattern": "^[A-Za-z0-9 ,._-]+$"
    },
    "condition": {
      "type": "string",
      "minLength": 3,
      "maxLength": 200,
      "pattern": "^[A-Za-z0-9 ,._-]+$"
    },
    "result": {
      "type": "string",
      "minLength": 3,
      "maxLength": 200,
      "pattern": "^[A-Za-z0-9 ,._-]+$"
    }
  },
  "required": ["actor", "modality", "action"],
  "additionalProperties": false,
  "examples": [
    {
      "actor": "system",
      "modality": "must",
      "action": "validate the access token",
      "condition": "upon receiving a request",
      "result": "log success or failure"
    }
  ]
}
